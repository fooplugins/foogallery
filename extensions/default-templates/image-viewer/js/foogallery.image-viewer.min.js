/*
* FooGallery - The Most Intuitive and Extensible Gallery Creation and Management Tool Ever Created for WordPress
* @version 0.0.1
* @link 
* @copyright Steven Usher & Brad Vincent 2015
* @license Released under the GPLv3 license.
*/

!function(a,b,c){b.ImageViewer=c.Class.extend({construct:function(c,d){this.options=a.extend(!0,{},b.ImageViewer.defaults,d),this.$el=a(c),this.$items=this.$el.find(".fiv-inner-container > .fg-item"),this.$current=this.$el.find(".fiv-count-current"),this.$prev=this.$el.find(".fiv-prev"),this.$next=this.$el.find(".fiv-next")},init:function(){this.options.attachFooBox&&this.$el.on("foobox.previous",{self:this},this.onFooBoxPrev).on("foobox.next",{self:this},this.onFooBoxNext),this.$prev.on("click",{self:this},this.onPrevClick),this.$next.on("click",{self:this},this.onNextClick),this.$items.removeClass("fiv-active").first().addClass("fiv-active")},destroy:function(){this.options.attachFooBox&&this.$el.off("foobox.previous",this.onFooBoxPrev).off("foobox.next",this.onFooBoxNext),this.$prev.off("click",this.onPrevClick),this.$next.off("click",this.onNextClick)},prev:function(){var a=this.$items.filter(".fiv-active").removeClass("fiv-active"),b=a.prev();0===b.length&&(b=this.$items.last()),b.addClass("fiv-active"),this.$current.text(b.index()+1)},next:function(){var a=this.$items.filter(".fiv-active").removeClass("fiv-active"),b=a.next();0===b.length&&(b=this.$items.first()),b.addClass("fiv-active"),this.$current.text(b.index()+1)},onFooBoxPrev:function(a){a.data.self.prev()},onFooBoxNext:function(a){a.data.self.next()},onPrevClick:function(a){a.preventDefault(),a.stopPropagation(),a.data.self.prev()},onNextClick:function(a){a.preventDefault(),a.stopPropagation(),a.data.self.next()}}),b.ImageViewer.defaults={attachFooBox:!0},a.fn.fgImageViewer=function(c){return this.each(function(){var d=a.data(this,"__FooGalleryImageViewer__");d&&d.destroy(),d=new b.ImageViewer(this,c),d.init(),a.data(this,"__FooGalleryImageViewer__",d)})}}(FooGallery.$,FooGallery,FooGallery.utils),function(a){a.ready(function(a){a(".fg-image-viewer").each(function(){var b=a(this),c=b.data("loader-options"),d=a.extend(!0,b.data("loader-options"),{oninit:function(){a(window).trigger("resize")},onloaded:function(b){a(b).fgRemoveSize()}});b.fgAddSize(!0).fgImageViewer(c).fgLoader(d)})})}(FooGallery);